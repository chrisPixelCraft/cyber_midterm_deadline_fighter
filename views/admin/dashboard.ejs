<div class="admin-title">
  <h2>Posts</h2>
  <a href="/add-post" class="button">+ Add New</a>
</div>

<ul class="admin-posts">
  <% data.forEach(post => { %>

  <li>
    <!-- Check if post's user data is available and has an avatar -->
    <% if (post.userId && post.userId.avatar) { %>
    <img
      src="<%= post.userId.avatar %>"
      alt="User Avatar"
      style="width: 50px; height: 50px; border-radius: 50%"
    />
    <% } else { %>
    <img
      src="/uploads/default_avatar.png"
      alt="Default Avatar"
      style="width: 50px; height: 50px; border-radius: 50%"
    />
    <% } %>
    <span><%= post.userId%></span>
    <!-- Display the username -->
    <a <a href="/post/<%= post._id %>"> <%= post.title %> &nearr; </a>
    <div class="admin-post-controls">
      <a href="/edit-post/<%= post._id %>" class="btn">Edit</a>

      <form action="/delete-post/<%= post._id %>?_method=DELETE" method="POST">
        <input type="submit" value="Delete" class="btn-delete btn" />
      </form>
    </div>
  </li>

  <% }) %>
</ul>
